Index: app/src/main/java/com/example/gigi_ibuhamil/pages/loginscreen/loginscreen.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.gigi_ibuhamil.pages.loginscreen\r\n\r\nimport android.util.Log\r\nimport android.widget.Toast\r\nimport androidx.activity.compose.rememberLauncherForActivityResult\r\nimport androidx.compose.foundation.background\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.material.Colors\r\nimport androidx.compose.material.ExperimentalMaterialApi\r\nimport androidx.compose.material.MaterialTheme\r\nimport androidx.compose.material.Text\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.platform.LocalContext\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.navigation.NavController\r\nimport com.example.gigi_ibuhamil.models.AuthViewModel\r\nimport com.example.gigi_ibuhamil.ui.GoogleSignInButtonUi\r\nimport com.example.gigi_ibuhamil.ui.*\r\nimport com.example.gigi_ibuhamil.util.AuthResultContract\r\nimport com.example.gigi_ibuhamil.util.SavedPreference\r\nimport com.example.gigi_ibuhamil.util.Screen\r\nimport com.google.android.gms.common.api.ApiException\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport kotlinx.coroutines.launch\r\n\r\n\r\nprivate val TAG = \"AuthScreen\"\r\n@ExperimentalMaterialApi\r\n@Composable\r\nfun LoginScreen(authViewModel: AuthViewModel, navController: NavController) {\r\n    val db = Firebase.firestore\r\n    val context = LocalContext.current\r\n    val emails = ArrayList<String>()\r\n    val coroutineScope = rememberCoroutineScope()\r\n    var text by remember { mutableStateOf<String?>(null) }\r\n    val user by remember(authViewModel){authViewModel.user}.collectAsState()\r\n    val signInRequestCode = 1\r\n    val authResultLauncher =\r\n        rememberLauncherForActivityResult(contract = AuthResultContract()){\r\n                task ->\r\n            try {\r\n                val account = task?.getResult(ApiException::class.java)\r\n                if (account==null){\r\n                    Toast.makeText(context,\"Google sign in failed\", Toast.LENGTH_SHORT).show()\r\n                    Log.d(TAG,\"Sign to Google Failed,There no account\")\r\n                }else{\r\n                    coroutineScope.launch {\r\n                        authViewModel.signIn(email = account.email, displayName = account.displayName)\r\n                    }\r\n                }\r\n            }catch (e: ApiException){\r\n                Toast.makeText(context,\"Google sign in failed\", Toast.LENGTH_SHORT).show()\r\n                Log.d(TAG,\"Sign to Google Failed,API Error\")\r\n            }\r\n        }\r\n    AuthView(\r\n        errorText = text,\r\n        onClick = {\r\n            text=null\r\n            authResultLauncher.launch(signInRequestCode)\r\n        }\r\n    )\r\n    user?.let{\r\n        val current = LocalContext.current\r\n        SavedPreference.setDisplayName(LocalContext.current,it.displayName)\r\n        SavedPreference.setEmail(LocalContext.current,it.email)\r\n        db.collection(\"users\")\r\n            .get()\r\n            .addOnSuccessListener {\r\n                    result ->\r\n                for(document in result) {\r\n                    var emailUser = document.data[\"email\"].toString()\r\n                    emails.add(emailUser)\r\n                    for (email in emails.indices)\r\n                        if(SavedPreference.getEmail(context).toString() == emails[email]) {\r\n                            navController.navigate(Screen.WelcomeScreen.route){popUpTo(0)}\r\n                            Toast.makeText(current, \"Successful Login, Directing to Home Screen\", Toast.LENGTH_SHORT).show()\r\n                        }\r\n                        else if (SavedPreference.getEmail(context).toString() != emails[email]){\r\n                            navController.navigate(Screen.InformationScreen.route){popUpTo(0)}\r\n//                            Toast.makeText(current, \"Successful Login, Directing to Information Data\", Toast.LENGTH_SHORT).show()\r\n\r\n                        }\r\n                }\r\n            }\r\n    }\r\n}\r\n\r\n@ExperimentalMaterialApi\r\n@Composable\r\nfun AuthView(errorText:String?,onClick:() -> Unit) {\r\n    Column(\r\n        verticalArrangement = Arrangement.Center,\r\n        horizontalAlignment = Alignment.CenterHorizontally,\r\n        modifier = Modifier\r\n            .fillMaxSize()\r\n            .background(gradbg)\r\n    ) {\r\n        Column(\r\n            modifier = Modifier.padding(40.dp),\r\n            verticalArrangement = Arrangement.Center,\r\n            horizontalAlignment = Alignment.CenterHorizontally\r\n        ) {\r\n            Text(\r\n                text = \"Login\",\r\n                style = MaterialTheme.typography.h1,\r\n                modifier = Modifier\r\n                    .padding(start = 10.dp, top = 10.dp)\r\n            )\r\n            Text(\r\n                text = \"With Google\",\r\n                style = MaterialTheme.typography.h6,\r\n                modifier = Modifier\r\n                    .padding(start = 10.dp,bottom = 30.dp)\r\n            )\r\n            Spacer(modifier = Modifier.height(30.dp))\r\n            GoogleSignInButtonUi(text = \"Sign In With Google\",\r\n                loadingText = \"Signing In....\",\r\n                onClicked = {onClick()})\r\n            errorText?.let {\r\n                Spacer(modifier = Modifier.height(30.dp))\r\n                Text(text = it)\r\n            }\r\n            Spacer(modifier = Modifier.height(50.dp))\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/gigi_ibuhamil/pages/loginscreen/loginscreen.kt b/app/src/main/java/com/example/gigi_ibuhamil/pages/loginscreen/loginscreen.kt
--- a/app/src/main/java/com/example/gigi_ibuhamil/pages/loginscreen/loginscreen.kt	(revision 4658cb5e1f385e11341babf555514463024780a1)
+++ b/app/src/main/java/com/example/gigi_ibuhamil/pages/loginscreen/loginscreen.kt	(date 1655111315462)
@@ -86,6 +86,7 @@
                         }
                 }
             }
+
     }
 }
 
Index: .idea/gradle.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleMigrationSettings\" migrationVersion=\"1\" />\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"GRADLE\" />\r\n        <option name=\"distributionType\" value=\"DEFAULT_WRAPPED\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"gradleJvm\" value=\"Android Studio default JDK\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n        <option name=\"resolveModulePerSourceSet\" value=\"false\" />\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/gradle.xml b/.idea/gradle.xml
--- a/.idea/gradle.xml	(revision 4658cb5e1f385e11341babf555514463024780a1)
+++ b/.idea/gradle.xml	(date 1655278409242)
@@ -7,7 +7,7 @@
         <option name="testRunner" value="GRADLE" />
         <option name="distributionType" value="DEFAULT_WRAPPED" />
         <option name="externalProjectPath" value="$PROJECT_DIR$" />
-        <option name="gradleJvm" value="Android Studio default JDK" />
+        <option name="gradleJvm" value="JDK" />
         <option name="modules">
           <set>
             <option value="$PROJECT_DIR$" />
